!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),o=n(i),a=r(1),s=n(a);if(t.default={Visualizer:o.default,Layer:s.default},!window.THREE)throw"You must import THREE >= 0.";window.Visualizer=o.default,window.Layer=s.default},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.children=[]}return i(e,[{key:"getRaycastIntersects",value:function(){return[]}},{key:"getAtCoordinate",value:function(e){return[]}},{key:"rescale",value:function(e){return e}},{key:"clearChildren",value:function(e){for(var t=this,r=0;r<t.children.length;r++)e.remove(t.children[r])}},{key:"requestInit",value:function(e){}},{key:"requestRender",value:function(e){return!1}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){i(this,e);var r=this;this.props=t,this.renderLayers=this.props.renderLayers||{},this.setControls=this.props.setControls||function(e,t,n){r.controls=new window.THREE.TrackballControls(t,n),r.controls.rotateSpeed=1,r.controls.zoomSpeed=.5,r.controls.panSpeed=.05,r.controls.maxDistance=4e3},this.backgroundColor=this.props.backgroundColor||new window.THREE.Color(0),this.origin=this.props.origin||[0,0,0],this.startingCameraPosition=t.startingCameraPosition||[0,0,100],this.onReady=this.props.onReady||function(e){},this.onReady(r),this.onKeyDown=this.props.onKeyDown||function(){},this.onClick=this.props.onClick||function(){},this.vizWidth=t.width||window.innerWidth,console.log(this.vizWidth),this.vizHeight=t.height||window.innerHeight,this.animate=this.animate.bind(this),this.getObjectsAtScreenCoordinate=this.getObjectsAtScreenCoordinate.bind(this),this.init=this.init.bind(this),this.requestUpdate=this.requestUpdate.bind(this),this.setCameraLocRot=this.setCameraLocRot.bind(this),this.triggerRender=this.triggerRender.bind(this),this.resize=this.resize.bind(this)}return o(e,[{key:"resize",value:function(e,t){e||(e=this.container.offsetWidth),t||(t=this.container.offsetHeight),this.vizWidth=e,this.vizHeight=t,this.requestUpdate()}},{key:"removeLayer",value:function(e){this.renderLayers[e].clearChildren(self.scene),delete this.renderLayers[e]}},{key:"addLayer",value:function(e,t){this.renderLayers[e]=t,this.renderLayers[e].requestInit(self.scene)}},{key:"requestUpdate",value:function(){this.camera.aspect=this.vizWidth/this.vizHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.vizWidth,this.vizHeight);var e=this;for(var t in e.renderLayers)e.renderLayers[t].needsUpdate=!0}},{key:"setCameraLocRot",value:function(e,t){var r,i,o=this;(r=o.camera.position).set.apply(r,n(e)),(i=o.camera.up).set.apply(i,n(t)),o.camera.updateProjectionMatrix()}},{key:"init",value:function(){var e=this;e.mouse=new window.THREE.Vector2,e.raycaster=new window.THREE.Raycaster,e.scene=new window.THREE.Scene,window.scene=e.scene,e.renderer=new window.THREE.WebGLRenderer,e.renderer.setPixelRatio(window.devicePixelRatio),e.renderer.setSize(this.vizWidth,this.vizHeight),e.scene.background=e.backgroundColor;var t=document.getElementById(this.props.targetElement);if(!t)throw Error("Could not find "+this.props.targetElement+" in DOM.");t.appendChild(e.renderer.domElement),e.container=t,e.camera=new window.THREE.PerspectiveCamera(10,e.vizWidth/e.vizHeight,1,1e5),e.setCameraLocRot(e.startingCameraPosition,[0,1,0]),e.setControls(e,e.camera,e.renderer.domElement),window.addEventListener("keydown",function(t){e.onKeyDown(e,t)}),window.addEventListener("mousedown",function(t){e.mouse.x=t.clientX/e.vizWidth*2-1,e.mouse.y=-t.clientY/e.vizHeight*2+1,e.raycaster.setFromCamera(e.mouse,e.camera),e.onClick(e,t,e.raycaster.intersectObjects(e.scene.children))}),window.addEventListener("resize",function(){e.camera.aspect=e.vizWidth/e.vizHeight,e.camera.updateProjectionMatrix(),e.renderer.setSize(e.vizWidth,e.vizHeight)},!1);for(var r in e.renderLayers)e.renderLayers[r].requestInit(e.scene)}},{key:"getObjectsAtScreenCoordinate",value:function(e,t){var r=this;return r.raycaster.setFromCamera(new window.THREE.Vector2(e,t),r.camera),r.raycaster.intersectObjects(r.scene.children)}},{key:"animate",value:function(){var e=this;requestAnimationFrame(e.animate),e.controls.update();for(var t in e.renderLayers)e.renderLayers[t].requestRender(e.scene,e);e.renderer.render(e.scene,e.camera)}},{key:"triggerRender",value:function(){var e=this;e.init(),e.animate()}}]),e}();t.default=a},function(e,t,r){e.exports=r(0)}]);